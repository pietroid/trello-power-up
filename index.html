<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
</head>

<body>
  <script src="https://p.trellocdn.com/power-up.min.js"></script>
  <script>
    const _MS_PER_MINUTE = 1000 * 60;
    const _MS_PER_HOUR = _MS_PER_MINUTE * 60;
    const _MS_PER_DAY = _MS_PER_HOUR * 24;

    function dateDiff(a, b) {
      return {
        minutes: Math.floor((a - b) / _MS_PER_MINUTE),
        hours: Math.floor((a - b) / _MS_PER_HOUR),
        days: Math.floor((a - b) / _MS_PER_DAY),
      }
    }

    TrelloPowerUp.initialize({
      'card-badges': function(t, options) {
        return t.card('dateLastActivity')
        .then(function(card) {

          const now = new Date();
          const lastActivity = card.dateLastActivity;

          const diff = dateDiff(now,lastActivity);

          return [{
            text: `BLA ${lastActivity}`
          }];  
        });
      },
    });

  </script>
</body>
</html>